<h2 id="__comments">评论</h2>

<script src="https://giscus.app/client.js"
        data-repo="yorks/mywiki"
        data-repo-id="R_kgDOQwbEfg"
        data-category="Announcements"
        data-category-id="DIC_kwDOQwbEfs4C0V9U"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>


<script>
  var giscus = document.querySelector("script[src*=giscus]")

  /* 监听 MkDocs 的主题切换 */
  var palette = __md_get("__palette")
  if (palette && typeof palette.color === "object") {
    var theme = palette.color.scheme === "slate" ? "dark" : "light"
    giscus.setAttribute("data-theme", theme) 
  }

  /* 注册监听器，当用户点击右上角切换模式时，评论区也跟着变 */
  var ref = document.querySelector("[data-md-component=palette]")
  ref.addEventListener("change", function() {
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
      var theme = palette.color.scheme === "slate" ? "dark" : "light"

      var frame = document.querySelector(".giscus-frame")
      frame.contentWindow.postMessage(
        { giscus: { setConfig: { theme } } },
        "https://giscus.app"
      )
    }
  })
</script>
